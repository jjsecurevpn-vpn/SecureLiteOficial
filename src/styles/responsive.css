/* ===========================================
   Responsive - Media Queries
   =========================================== */

/* Reducir animaciones y transiciones en dispositivos lentos */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@media (max-width: 520px) {
  .session-card {
    flex-direction: column;
    align-items: flex-start;
  }
  .session-card__button {
    width: 100%;
    text-align: center;
  }
}

@media (max-width: 450px) {
  .phone {
    height: 100vh;
  }
  .field.full {
    grid-column: auto;
  }
}

@media (max-width: 340px) {
  :root {
    --scale-factor: 0.8;
    --header-padding: 30px;
    --screen-top: 130px;
    --top-strip-height: 130px;
    --hero-top: 110px;
  }
  .fields {
    grid-template-columns: 1fr;
  }
  .field.full {
    grid-column: auto;
  }
  .quick-grid,
  .stat-grid {
    grid-template-columns: 1fr;
  }
}

@media (min-width: 341px) and (max-width: 375px) {
  :root {
    --scale-factor: 0.9;
  }
}

@media (min-width: 376px) and (max-width: 480px) {
  :root {
    --scale-factor: 1;
  }
}

@media (min-width: 481px) {
  :root {
    --scale-factor: 1.1;
  }
  .server-card {
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  .logo {
    max-width: 520px;
  }
}

/* ===========================================
   TV Home (Landscape 16:9)
   - Solo aplica en Home
   - Evita scroll por diseño, pero lo mantiene como fallback
   =========================================== */

@media (orientation: landscape) and (min-width: 900px) {
  .phone.is-home,
  .phone.is-servers {
    --tv-rail-width: clamp(260px, 26vw, 360px);
    --tv-rail-pad-x: var(--space-lg);
    --tv-rail-pad-y: clamp(16px, 2.2vh, 28px);
    --tv-home-pad: clamp(12px, 2.2vh, 22px);
    --tv-logo-max-h: clamp(60px, 14vh, 110px);

    display: grid;
    grid-template-columns: var(--tv-rail-width) 1fr;
    grid-template-rows: auto 1fr;
    overflow: hidden;
  }

  /* Degradé (top-strip) como rail vertical izquierdo */
  .phone.is-home .top-strip,
  .phone.is-servers .top-strip {
    height: 100%;
    width: var(--tv-rail-width);
    inset: 0 auto 0 0;
  }

  .phone.is-home.state-disconnected .top-strip,
  .phone.is-servers.state-disconnected .top-strip {
    background: linear-gradient(90deg, var(--status-bad-90), var(--status-bad-55) 40%, transparent);
  }

  .phone.is-home.state-connecting .top-strip,
  .phone.is-servers.state-connecting .top-strip {
    background: linear-gradient(90deg, var(--muted-2-85), var(--muted-2-45) 40%, transparent);
  }

  .phone.is-home.state-connected .top-strip,
  .phone.is-servers.state-connected .top-strip {
    background: linear-gradient(90deg, var(--status-ok-85), var(--status-ok-45) 40%, transparent);
  }

  /* Header a la izquierda (compacto) */
  .phone.is-home header.topbar,
  .phone.is-servers header.topbar {
    grid-column: 1;
    grid-row: 1;
    padding: var(--tv-rail-pad-y) var(--tv-rail-pad-x);
    align-items: flex-start;
  }

  /* TV: ocultar CTA de suscripción (solo en el header) */
  .phone.is-home header.topbar .subscribe-btn,
  .phone.is-servers header.topbar .subscribe-btn {
    display: none;
  }

  /* TV: ocultar toggle de tema en el header */
  .phone.is-home header.topbar .theme-btn,
  .phone.is-servers header.topbar .theme-btn {
    display: none;
  }

  /* TV: ocultar botón de menú (dots) en Home/Servers */
  .phone.is-home header.topbar .dots,
  .phone.is-servers header.topbar .dots {
    display: none;
  }

  /* Banner (hero) pasa de absolute a flujo normal en el rail */
  .phone.is-home .hero {
    grid-column: 1;
    grid-row: 2;
    position: relative;
    top: auto;
    left: auto;
    right: auto;
    padding: 0 var(--tv-rail-pad-x);
    margin-top: 0;
    height: 100%;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  /* TV: estado de conexión en vertical para mejor lectura en rail */
  .phone.is-home .hero .title {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    letter-spacing: 0.12em;
    font-size: clamp(14px, 2.2vh, 20px);
    line-height: 1;
    margin-top: var(--space-xs);
    max-height: calc(100vh - (var(--tv-rail-pad-y) * 2));
    overflow: hidden;
  }

  .phone.is-home .hero i {
    font-size: clamp(18px, 3vh, 34px);
  }

  /* Home a la derecha: desactiva layout absoluto de .screen SOLO para Home */
  .phone.is-home .screen.home-screen {
    grid-column: 2;
    grid-row: 1 / span 2;
    position: relative;
    inset: auto;
    height: 100%;
    padding: var(--tv-home-pad);
    overflow: auto; /* fallback si algo excede el alto */

    display: flex;
    flex-direction: column;
  }

  /* Servers a la derecha: mismo patrón que Home, sin el centrado vertical */
  .phone.is-servers .screen.servers-screen {
    grid-column: 2;
    grid-row: 1 / span 2;
    position: relative;
    inset: auto;
    height: 100%;
    padding: var(--tv-home-pad);
    overflow: auto; /* fallback */
  }

  /* Centrado vertical del contenido principal (logo + card)
     - Si no hay espacio, los márgenes auto se colapsan a 0 y queda arriba */
  .phone.is-home .screen.home-screen .home-main {
    width: 100%;
    margin: auto 0;
  }

  .phone.is-home .logo {
    max-height: var(--tv-logo-max-h);
  }

  /* TV: ocultar search y botón de configuración en Servers para navegación remota */
  .phone.is-servers .servers-content .search-field,
  .phone.is-servers .servers-content .config-btn {
    display: none;
  }

  /* Card y spacing más compactos en TV */
  .phone.is-home .server-card {
    margin-top: var(--space-sm);
    padding: var(--space-md);
    max-width: min(620px, 100%);
  }

  .phone.is-home .quick-grid {
    gap: var(--space-sm);
    margin-top: var(--space-sm);
  }
}

/* Ajuste extra para 720p (menos alto disponible) */
@media (orientation: landscape) and (min-width: 900px) and (max-height: 800px) {
  .phone.is-home,
  .phone.is-servers {
    --tv-rail-width: clamp(230px, 24vw, 320px);
    --tv-rail-pad-y: clamp(12px, 1.6vh, 18px);
    --tv-home-pad: clamp(10px, 1.8vh, 16px);
    --tv-logo-max-h: clamp(56px, 12vh, 86px);

    /* Compactar controles sin afectar otras pantallas */
    --btn-height: clamp(30px, 4.2vh, 38px);
    --input-height: clamp(30px, 4.2vh, 38px);
  }

  .phone.is-home .server-card {
    padding: var(--space-sm);
  }

  .phone.is-home .fields {
    margin-top: var(--space-sm);
  }

  .phone.is-home .connect-row {
    margin-top: var(--space-sm);
  }
}
